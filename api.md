# API Документация

## Оглавление

1. [Аутентификация и авторизация](#аутентификация-и-авторизация)
2. [Пользователи](#пользователи)
3. [Задачи](#задачи)
4. [Административные функции](#административные-функции)
5. [Дополнительные функции](#дополнительные-функции)

---

## Аутентификация и авторизация

### `POST /login`

Этот эндпоинт используется для аутентификации пользователей.

**Параметры запроса:**
- `username` (строка): Имя пользователя.
- `password` (строка): Пароль пользователя.

**Ответ:**
- `302 Found` при успешной аутентификации.
- `200 OK` с сообщением об ошибке при неверных учетных данных.

### `GET /logout`

Этот эндпоинт используется для выхода из системы (разлогинивания).

**Ответ:**
- `302 Found` с перенаправлением на страницу входа.

---

## Пользователи

### `GET /users`

Этот эндпоинт возвращает список всех пользователей в системе.

**Ответ:**
- `200 OK` с JSON-массивом пользователей.

### `POST /create_user`

Этот эндпоинт создает нового пользователя.

**Параметры запроса:**
- `username` (строка): Имя пользователя.
- `password` (строка): Пароль пользователя.
- `role` (строка): Роль пользователя (только для администраторов).

**Ответ:**
- `302 Found` с перенаправлением на страницу пользователей при успешном создании.
- `400 Bad Request` с сообщением об ошибке при неправильных данных.

### `POST /change_password`

Этот эндпоинт изменяет пароль пользователя.

**Параметры запроса:**
- `user_id` (число): Идентификатор пользователя.
- `new_password` (строка): Новый пароль.

**Ответ:**
- `200 OK` с сообщением об успешном обновлении пароля.
- `404 Not Found` при отсутствии пользователя.

### `POST /delete_user`

Этот эндпоинт удаляет пользователя.

**Параметры запроса:**
- `user_id` (число): Идентификатор пользователя.

**Ответ:**
- `200 OK` с сообщением об успешном удалении пользователя.
- `404 Not Found` при отсутствии пользователя.

---

## Задачи

### `GET /tasks`

Этот эндпоинт возвращает список всех задач в системе.

**Ответ:**
- `200 OK` с JSON-массивом задач.

### `POST /create_task`

Этот эндпоинт создает новую задачу.

**Параметры запроса:**
- `task_content` (строка): Содержание задачи.
- `priority` (число): Приоритет задачи.
- `description` (строка): Описание задачи.
- `customer` (строка): Заказчик задачи.
- `department` (строка): Отдел задачи.
- `assigned_to` (число): Идентификатор пользователя, назначенного на задачу.

**Ответ:**
- `200 OK` с JSON-объектом созданной задачи и её идентификатором.
- `400 Bad Request` с сообщением об ошибке при неправильных данных.

### `POST /update_task/<task_id>`

Этот эндпоинт обновляет существующую задачу.

**Параметры запроса:**
- `task_id` (строка): Идентификатор задачи.
- `content` (строка): Новое содержание задачи (опционально).
- `description` (строка): Новое описание задачи (опционально).
- `assigned_to` (число): Новый идентификатор пользователя, назначенного на задачу (опционально).

**Ответ:**
- `200 OK` с сообщением об успешном обновлении задачи.
- `404 Not Found` при отсутствии задачи с указанным `task_id`.

### `POST /delete_task`

Этот эндпоинт удаляет задачу.

**Параметры запроса:**
- `task_id` (строка): Идентификатор задачи.

**Ответ:**
- `200 OK` с сообщением об успешном удалении задачи.
- `404 Not Found` при отсутствии задачи с указанным `task_id`.

### `POST /delete_tasks`

Этот эндпоинт удаляет несколько задач одновременно.

**Параметры запроса:**
- `task_ids[]` (массив строк): Массив идентификаторов задач для удаления.

**Ответ:**
- `200 OK` с сообщением об успешном удалении задач.
- `400 Bad Request` при отсутствии идентификаторов задач.

### `POST /start_task/<task_id>`

Этот эндпоинт помечает задачу как начатую.

**Параметры запроса:**
- `task_id` (число): Идентификатор задачи.

**Ответ:**
- `200 OK` с сообщением об успешном изменении статуса задачи.
- `404 Not Found` при отсутствии задачи с указанным `task_id`.

### `POST /end_task/<task_id>`

Этот эндпоинт помечает задачу как завершенную.

**Параметры запроса:**
- `task_id` (число): Идентификатор задачи.

**Ответ:**
- `200 OK` с сообщением об успешном изменении статуса задачи.
- `404 Not Found` при отсутствии задачи с указанным `task_id`.

### `POST /update_task_status`

Этот эндпоинт обновляет статус задачи.

**Параметры запроса:**
- `task_id` (строка): Идентификатор задачи.
- `status` (строка или число): Новый статус задачи ("В очереди", "В работе", "Готово" или их числовые эквиваленты).

**Ответ:**
- `200 OK` с сообщением об успешном изменении статуса задачи.
- `400 Bad Request` при некорректных данных о статусе задачи.

---

## Административные функции

### `GET /admin_panel`

Этот эндпоинт предоставляет доступ к панели администратора.

**Ответ:**
- `200 OK` с сообщением "Admin Panel".

### `POST /change_role`

Этот эндпоинт изменяет роль пользователя.

**Параметры запроса:**
- `user_id` (число): Идентификатор пользователя.
- `new_role` (строка): Новая роль пользователя.

**Ответ:**
- `200 OK` с сообщением об успешном изменении роли.
