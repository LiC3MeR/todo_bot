<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
body {
      background-color: black;
      color: #ffff;
}
 button {
    border-radius: 10px;
    color:red ;
    transition: .2s linear;
    background: #ffff;
}

button:hover {
    box-shadow: 0 0 0 2px white, 0 0 0 4px #3C82F8;
}
        

</style>
</head>
<body>

<!-- start header -->
<div id="pageHeader">
  <div id="title">Smoke big dick</div>
  <!-- navigation -->
  <div class="navigation">
      <button>reg</button>
      <button>About</button>
      <button>Instructors</button>
      <button>Testimonials</button>
      <button onclick="sendRequest()">Слить правки</button>

  </div>
    <!-- работа с формой -->
    <div>
        <form>
            <label for="tasckdata">Выберите приоритет задачи</label></br>
                <select name="tasckdata" id="tasckdata">

                </select>

        </form>

    </div>
</div>
<div>

</div>
 <div class="task-board">
            <div class="column" id="queue">
                <h2 class="text-center text-light">В очереди</h2>
                {% for task in tasks_by_section['В очереди'] %}
                <div class="task" data-id="{{ task.task_id }}">
                    <h5>{{ task.content }}</h5>
                    <p>{{ task.description }}</p>
                </div>
                {% endfor %}
            </div>
            <div class="column" id="in-progress">
                <h2 class="text-center text-light">В работе</h2>
                {% for task in tasks_by_section['В работе'] %}
                <div class="task" data-id="{{ task.task_id }}">
                    <h5>{{ task.content }}</h5>
                    <p>{{ task.description }}</p>
                </div>
                {% endfor %}
            </div>
            <div class="column" id="done">
                <h2 class="text-center text-light">Готово</h2>
                {% for task in tasks_by_section['Готово'] %}
                <div class="task" data-id="{{ task.task_id }}">
                    <h5>{{ task.content }}</h5>
                    <p>{{ task.description }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            const taskList = document.getElementById('task-list');

            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
            });

            function updateTaskList() {
                fetch('/tasks')
                    .then(response => response.json())
                    .then(data => {
                        taskList.innerHTML = ''; // Очистить текущий список задач
                        data.tasks.forEach(task => {
                            const li = document.createElement('li');
                            li.textContent = `${task.content} - ${task.status}`;
                            taskList.appendChild(li);
                        });
                    })
                    .catch(error => console.error('Error updating task list:', error));
            }
            // Начальная загрузка списка задач
            updateTaskList();

            // Обновлять список задач каждые 30 секунд
            setInterval(updateTaskList, 30000);
            const taskForm = document.querySelector('form');
            taskForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Предотвратить отправку формы

                const formData = new FormData(taskForm);
                fetch('/', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    alert(data.message); // Показать сообщение об успешном добавлении задачи
                    updateTaskList(); // Обновить список задач
                    taskForm.reset(); // Сбросить значения формы
                })
                .catch(error => console.error('Error adding task:', error));
            });
        });
        function sendRequest() {
    		var xhr = new XMLHttpRequest(); // Создание нового XMLHttpRequest объекта
    		xhr.open("GET", "/pravki", true); // Конфигурирование запроса на получение данных с сервера
    		xhr.onreadystatechange = function () {
    		    if (xhr.readyState === 4 && xhr.status === 200) {
    		        // Ответ получен, но мы ничего с ним не делаем
    		   }
    		};
    		xhr.send(); // Отправка запроса
		}
</script>
    </script>

</body>


  <footer>Alex debil</footer>
</html>